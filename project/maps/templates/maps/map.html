{% extends 'base.html' %}

{% load static %}
{% load datetime_filter %}
{% load humanize %}


{% block head %}
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <script type="text/javascript" src="//maps.google.com/maps/api/js?key={{ google_api_key }}"></script>
    <!-- <script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=true"></script> -->
    <script type="text/javascript" src="{% static 'js/gmaps.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/prettify.js' %}"></script>
    <link rel='stylesheet' id='google-font-playfair-display-css' href='//fonts.googleapis.com/css?family=Playfair+Display:400,%20%20%20%20400italic,700,700italic,900,900italic' type='text/css' media='all' />
    <link rel='stylesheet' id='google-font-lora-css'  href='//fonts.googleapis.com/css?family=Lora:400,400italic,700,700italic' type='text/css' media='all' />
    <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="{{ MEDIA_URL }}points/{{ trip.pk }}-points.js?v={{ js_version }}"></script>

{% endblock %}

{% block content %}
    <!-- Loader -->
    <div class="htmx-indicator loader loader-default is-active" id="indicator"></div>

    <div class="row mx-auto pt-3">
        <div class="col-sm-12 mx-auto" style="text-align:center;">
            <h2>{{ trip.title }}</h2>
            <p>{{ trip.description }}</p>
        </div>
    </div>

    <div class="map_row">
        <div class="popin">
            <div id="map"></div>
        </div>
    </div>

    <div class="row mx-auto">
        <div class="col- mx-auto pt-3 text-center">
            <p class="stats">
                {% now "Y-m-d" as todays_date %}
                {% if todays_date < trip.start_date|date:"Y-m-d" %}
                Kelionė dar neprasidėjo.
                {% elif todays_date > trip.end_date|date:"Y-m-d" %}
                Kelionė jau pasibaigusi.
                {% else %}
                <b>{{ statistic.total_days }}</b> diena kelyje.{% endif %}
                Nuvažiavau <b>{{ statistic.total_km|floatformat:2 }}</b>km per <b>{{ statistic.total_time|format_datetime }}</b>. Pakilau <b>{{ statistic.total_ascent|floatformat:0|intcomma }}</b>m. Nusileidau <b>{{ statistic.total_descent|floatformat:0|intcomma }}</b>m</p>
        </div>
    </div>

    {{ posts }}

<link rel='stylesheet' id='envira-gallery-lite-style-css'  href='https://unknownbug.net/nezinomas/wp-content/plugins/envira-gallery-lite/assets/css/envira.css?ver=1.8.4.6' type='text/css' media='all' property="stylesheet" />
<link rel='stylesheet' id='envira-gallery-lite-lazyload-css'  href='https://unknownbug.net/nezinomas/wp-content/plugins/envira-gallery-lite/assets/css/responsivelyLazy.css?ver=1.8.4.6' type='text/css' media='all' property="stylesheet" />
<link rel='stylesheet' id='envira-gallery-lite-fancybox-css'  href='https://unknownbug.net/nezinomas/wp-content/plugins/envira-gallery-lite/assets/css/fancybox.css?ver=1.8.4.6' type='text/css' media='all' property="stylesheet" />
<link rel='stylesheet' id='envira-gallery-lite-jgallery-css'  href='https://unknownbug.net/nezinomas/wp-content/plugins/envira-gallery-lite/assets/css/justifiedGallery.css?ver=1.8.4.6' type='text/css' media='all' property="stylesheet" />

<script type='text/javascript' id='envira-gallery-lite-script-js-extra'>
/* <![CDATA[ */
var envira_lazy_load = ["true"];
var envira_lazy_load_initial = ["false"];
var envira_lazy_load_delay = ["500"];
var envira_lazy_load = ["true"];
var envira_lazy_load_initial = ["false"];
var envira_lazy_load_delay = ["500"];
/* ]]> */
</script>
<script type='text/javascript' src='https://unknownbug.net/nezinomas/wp-content/plugins/envira-gallery-lite/assets/js/min/envira-min.js?ver=1.8.4.6' id='envira-gallery-lite-script-js'></script>
<script type="text/javascript">
    var envira_galleries = [],envira_gallery_images = [],envira_isotopes = [],envira_isotopes_config = [];jQuery(document).ready(function($){var envira_container_7448 = '';function envira_album_lazy_load_image( $id ) {var responsivelyLazy = window.responsivelyLazy;responsivelyLazy.run('#envira-gallery-'+ $id);}$('#envira-gallery-7448').enviraJustifiedGallery({rowHeight : 150,maxRowHeight: -1,waitThumbnailsLoad: true,selector: '> div > div',lastRow: 'nojustify',border: 0,margins: 1,});$('#envira-gallery-7448').justifiedGallery().on('jg.complete', function (e) {envira_album_lazy_load_image(7448);$(window).scroll(function(event){envira_album_lazy_load_image(7448);});});$( document ).on( "envira_pagination_ajax_load_completed", function() {$('#envira-gallery-7448').justifiedGallery().on('jg.complete', function (e) {envira_album_lazy_load_image(7448);$(window).scroll(function(event){envira_album_lazy_load_image(7448);});});});$('#envira-gallery-7448').css('opacity', '1');envira_container_7448 = $('#envira-gallery-7448').enviraImagesLoaded( function() {$('.envira-gallery-item img').fadeTo( 'slow', 1 );});envira_gallery_options = {padding: 15,cyclic: true,titlePosition: 'float',margin: 60,arrows: 1,aspectRatio: 1,loop: 1,mouseWheel: 1,preload: 1,openEffect: 'fade',closeEffect: 'fade',nextEffect: 'fade',prevEffect: 'fade',tpl: {wrap : '<div class="envirabox-wrap" tabIndex="-1"><div class="envirabox-skin envirabox-theme-base"><div class="envirabox-outer"><div class="envirabox-inner"><div class="envirabox-position-overlay envira-gallery-top-left"></div><div class="envirabox-position-overlay envira-gallery-top-right"></div><div class="envirabox-position-overlay envira-gallery-bottom-left"></div><div class="envirabox-position-overlay envira-gallery-bottom-right"></div></div></div></div></div>',image: '<img class="envirabox-image" src="{href}" alt="" data-envira-title="" data-envira-caption="" data-envira-index="" data-envira-data="" />',iframe : '<iframe id="envirabox-frame{rnd}" name="envirabox-frame{rnd}" class="envirabox-iframe" frameborder="0" vspace="0" hspace="0" allowtransparency="true" wekitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',error: '<p class="envirabox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn : '<a title="Close" class="envirabox-item envirabox-close" href="#"></a>',next : '<a title="Next" class="envirabox-nav envirabox-next envirabox-arrows-inside" href="#"><span></span></a>',prev : '<a title="Previous" class="envirabox-nav envirabox-prev envirabox-arrows-inside" href="#"><span></span></a>'},helpers: {title: {type: 'float'},},beforeLoad: function(){this.title = $(this.element).attr('data-envira-caption');},afterLoad: function(){$('envirabox-overlay-fixed').on({'touchmove' : function(e){e.preventDefault();}});},beforeShow: function(){$(window).on({'resize.envirabox' : function(){$.envirabox.update();}});if ( typeof this.element === 'undefined' ) {var gallery_id = this.group[ this.index ].gallery_id;var gallery_item_id = this.group[ this.index ].id;var alt = this.group[ this.index ].alt;var title = this.group[ this.index ].title;var caption = this.group[ this.index ].caption;var index = this.index;} else {var gallery_id = this.element.find('img').data('envira-gallery-id');var gallery_item_id = this.element.find('img').data('envira-item-id');var alt = this.element.find('img').attr('alt');var title = this.element.find('img').parent().attr('title');var caption = this.element.find('img').parent().data('envira-caption');var retina_image = this.element.find('img').parent().data('envira-retina');var index = this.element.find('img').data('envira-index');}this.inner.find('img').attr('alt', alt).attr('data-envira-gallery-id', gallery_id).attr('data-envira-item-id', gallery_item_id).attr('data-envira-title', title).attr('data-envira-caption', caption).attr('data-envira-index', index);if ( typeof retina_image !== 'undefined' && retina_image !== '' ) {this.inner.find('img').attr('srcset', retina_image + ' 2x');}},onStart: function(){$('#envirabox-wrap, #envirabox-wrap #envirabox-left, #envirabox-wrap #envirabox-right').swipe( {excludedElements:"label, button, input, select, textarea, .noSwipe",swipe: function(event, direction, distance, duration, fingerCount, fingerData) {if (direction === 'left') {$.envirabox.next(direction);} else if (direction === 'right') {$.envirabox.prev(direction);} else if (direction === 'up') {$.envirabox.close();}}} );},beforeClose: function(){},afterClose: function(){$(window).off('resize.envirabox');},onUpdate: function(){},onCancel: function(){},onPlayStart: function(){},onPlayEnd: function(){}};envira_galleries['7448'] = $('.envira-gallery-7448').envirabox( envira_gallery_options );var envira_container_7438 = '';function envira_album_lazy_load_image( $id ) {var responsivelyLazy = window.responsivelyLazy;responsivelyLazy.run('#envira-gallery-'+ $id);}$('#envira-gallery-7438').enviraJustifiedGallery({rowHeight : 150,maxRowHeight: -1,waitThumbnailsLoad: true,selector: '> div > div',lastRow: 'nojustify',border: 0,margins: 1,});$('#envira-gallery-7438').justifiedGallery().on('jg.complete', function (e) {envira_album_lazy_load_image(7438);$(window).scroll(function(event){envira_album_lazy_load_image(7438);});});$( document ).on( "envira_pagination_ajax_load_completed", function() {$('#envira-gallery-7438').justifiedGallery().on('jg.complete', function (e) {envira_album_lazy_load_image(7438);$(window).scroll(function(event){envira_album_lazy_load_image(7438);});});});$('#envira-gallery-7438').css('opacity', '1');envira_container_7438 = $('#envira-gallery-7438').enviraImagesLoaded( function() {$('.envira-gallery-item img').fadeTo( 'slow', 1 );});envira_gallery_options = {padding: 15,cyclic: true,titlePosition: 'float',margin: 60,arrows: 1,aspectRatio: 1,loop: 1,mouseWheel: 1,preload: 1,openEffect: 'fade',closeEffect: 'fade',nextEffect: 'fade',prevEffect: 'fade',tpl: {wrap : '<div class="envirabox-wrap" tabIndex="-1"><div class="envirabox-skin envirabox-theme-base"><div class="envirabox-outer"><div class="envirabox-inner"><div class="envirabox-position-overlay envira-gallery-top-left"></div><div class="envirabox-position-overlay envira-gallery-top-right"></div><div class="envirabox-position-overlay envira-gallery-bottom-left"></div><div class="envirabox-position-overlay envira-gallery-bottom-right"></div></div></div></div></div>',image: '<img class="envirabox-image" src="{href}" alt="" data-envira-title="" data-envira-caption="" data-envira-index="" data-envira-data="" />',iframe : '<iframe id="envirabox-frame{rnd}" name="envirabox-frame{rnd}" class="envirabox-iframe" frameborder="0" vspace="0" hspace="0" allowtransparency="true" wekitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',error: '<p class="envirabox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn : '<a title="Close" class="envirabox-item envirabox-close" href="#"></a>',next : '<a title="Next" class="envirabox-nav envirabox-next envirabox-arrows-inside" href="#"><span></span></a>',prev : '<a title="Previous" class="envirabox-nav envirabox-prev envirabox-arrows-inside" href="#"><span></span></a>'},helpers: {title: {type: 'float'},},beforeLoad: function(){this.title = $(this.element).attr('data-envira-caption');},afterLoad: function(){$('envirabox-overlay-fixed').on({'touchmove' : function(e){e.preventDefault();}});},beforeShow: function(){$(window).on({'resize.envirabox' : function(){$.envirabox.update();}});if ( typeof this.element === 'undefined' ) {var gallery_id = this.group[ this.index ].gallery_id;var gallery_item_id = this.group[ this.index ].id;var alt = this.group[ this.index ].alt;var title = this.group[ this.index ].title;var caption = this.group[ this.index ].caption;var index = this.index;} else {var gallery_id = this.element.find('img').data('envira-gallery-id');var gallery_item_id = this.element.find('img').data('envira-item-id');var alt = this.element.find('img').attr('alt');var title = this.element.find('img').parent().attr('title');var caption = this.element.find('img').parent().data('envira-caption');var retina_image = this.element.find('img').parent().data('envira-retina');var index = this.element.find('img').data('envira-index');}this.inner.find('img').attr('alt', alt).attr('data-envira-gallery-id', gallery_id).attr('data-envira-item-id', gallery_item_id).attr('data-envira-title', title).attr('data-envira-caption', caption).attr('data-envira-index', index);if ( typeof retina_image !== 'undefined' && retina_image !== '' ) {this.inner.find('img').attr('srcset', retina_image + ' 2x');}},onStart: function(){$('#envirabox-wrap, #envirabox-wrap #envirabox-left, #envirabox-wrap #envirabox-right').swipe( {excludedElements:"label, button, input, select, textarea, .noSwipe",swipe: function(event, direction, distance, duration, fingerCount, fingerData) {if (direction === 'left') {$.envirabox.next(direction);} else if (direction === 'right') {$.envirabox.prev(direction);} else if (direction === 'up') {$.envirabox.close();}}} );},beforeClose: function(){},afterClose: function(){$(window).off('resize.envirabox');},onUpdate: function(){},onCancel: function(){},onPlayStart: function(){},onPlayEnd: function(){}};envira_galleries['7438'] = $('.envira-gallery-7438').envirabox( envira_gallery_options );});
</script>

{% endblock %}
